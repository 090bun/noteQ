(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[700],{2100:(e,s,t)=>{Promise.resolve().then(t.bind(t,9076))},5731:(e,s,t)=>{"use strict";t.d(s,{Py:()=>n});var r=t(3464);let a=t(9509).env.NEXT_PUBLIC_API_ORIGIN||"/api",n="".concat(a),i=r.A.create({baseURL:n,withCredentials:!0}),o=async function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=e.startsWith("/")?"".concat(n).concat(e):"".concat(n,"/").concat(e),r=await fetch(t,{...s,credentials:"include"});if(!r.ok)throw Error("API Error: ".concat(r.status));return r.json()};try{o[Symbol.toPrimitive]=()=>n,o.toString=()=>n,o.valueOf=()=>n}catch(e){}try{i[Symbol.toPrimitive]=()=>n,i.toString=()=>n,i.valueOf=()=>n}catch(e){}},9076:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>o});var r=t(5155),a=t(5731),n=t(2115),i=t(5695);function o(){let e=(0,i.useParams)(),s=(0,i.useRouter)(),[t,o]=(0,n.useState)(""),[d,c]=(0,n.useState)(""),[l,u]=(0,n.useState)(!1),[m,x]=(0,n.useState)(""),[h,p]=(0,n.useState)(""),[f,g]=e.params||[],y=async e=>{if(e.preventDefault(),t!==d)return void p("密碼不一致");if(t.length<6)return void p("密碼長度至少 6 個字符");u(!0),p("");try{let e=await fetch("".concat(a.Py,"/reset-password/"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({uid:f,token:g,new_password:t})}),r=await e.json();e.ok?(x(r.message||"密碼重設成功！"),setTimeout(()=>{s.push("/login")},2e3)):p(r.error||"重設密碼失敗")}catch(e){p("網路錯誤，請稍後再試")}finally{u(!1)}};return f&&g?(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:(0,r.jsxs)("div",{className:"max-w-md w-full space-y-8",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"重設密碼"}),(0,r.jsx)("p",{className:"mt-2 text-center text-sm text-gray-600",children:"請輸入您的新密碼"})]}),(0,r.jsxs)("form",{className:"mt-8 space-y-6",onSubmit:y,children:[(0,r.jsxs)("div",{className:"rounded-md shadow-sm -space-y-px",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"password",className:"sr-only",children:"新密碼"}),(0,r.jsx)("input",{id:"password",name:"password",type:"password",required:!0,className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-t-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 focus:z-10 sm:text-sm",placeholder:"新密碼",value:t,onChange:e=>o(e.target.value)})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"confirm-password",className:"sr-only",children:"確認密碼"}),(0,r.jsx)("input",{id:"confirm-password",name:"confirm-password",type:"password",required:!0,className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-b-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 focus:z-10 sm:text-sm",placeholder:"確認新密碼",value:d,onChange:e=>c(e.target.value)})]})]}),h&&(0,r.jsx)("div",{className:"rounded-md bg-red-50 p-4",children:(0,r.jsx)("div",{className:"text-sm text-red-700",children:h})}),m&&(0,r.jsx)("div",{className:"rounded-md bg-green-50 p-4",children:(0,r.jsx)("div",{className:"text-sm text-green-700",children:m})}),(0,r.jsx)("div",{children:(0,r.jsx)("button",{type:"submit",disabled:l,className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50",children:l?"處理中...":"重設密碼"})})]})]})}):(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:(0,r.jsx)("div",{className:"max-w-md w-full space-y-8",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("h2",{className:"text-3xl font-extrabold text-red-600",children:"無效的重設連結"}),(0,r.jsx)("p",{className:"mt-2 text-sm text-gray-600",children:"請檢查您的郵件中的連結是否完整"})]})})})}}},e=>{e.O(0,[794,441,964,358],()=>e(e.s=2100)),_N_E=e.O()}]);