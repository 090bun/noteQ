(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[584],{3024:e=>{e.exports={userDashboard:"UserPage_userDashboard__wfAem",dashboardContainer:"UserPage_dashboardContainer__GecHd",profileColumn:"UserPage_profileColumn__wtbbd",profileHeader:"UserPage_profileHeader__zKHmx",profileIcon:"UserPage_profileIcon__nJ_dy",profileName:"UserPage_profileName__xcQDs",profileCard:"UserPage_profileCard__1L4TJ",profileBg:"UserPage_profileBg__u_ogN",tabContainer:"UserPage_tabContainer__HekFc",tabButton:"UserPage_tabButton__8w_mY",active:"UserPage_active__Hqp2m",tabPanel:"UserPage_tabPanel__Sr1CX",personalInfo:"UserPage_personalInfo__8xm2K",infoItem:"UserPage_infoItem__shECj",infoTitle:"UserPage_infoTitle__1UP9F",infoContent:"UserPage_infoContent__JP62U",changePasswordBtn:"UserPage_changePasswordBtn__nm_de",topicsList:"UserPage_topicsList__TWczu",topicItem:"UserPage_topicItem__dVXCn",topicHeader:"UserPage_topicHeader___IHRr",topicTitle:"UserPage_topicTitle__8NBpn",progressContainer:"UserPage_progressContainer__4oLzH",progressLabel:"UserPage_progressLabel__boNpO",progressBar:"UserPage_progressBar__qKx_c",progress:"UserPage_progress__YHj_4",progressPercentage:"UserPage_progressPercentage__t3squ",noTopicsMessage:"UserPage_noTopicsMessage__ri03m",subscriptionColumn:"UserPage_subscriptionColumn__7jlx8",planCard:"UserPage_planCard__e1_aG",planHeader:"UserPage_planHeader__IrrvD",current:"UserPage_current__FYWZZ",upgrade:"UserPage_upgrade__PQuOt",featureList:"UserPage_featureList__8Dwyn",featureItem:"UserPage_featureItem__Cdc4H",free:"UserPage_free__9vlz2",priceDisplay:"UserPage_priceDisplay__D97QZ",viewCurrentPlanBtn:"UserPage_viewCurrentPlanBtn__Fs1ih",modalOverlay:"UserPage_modalOverlay__3fmqb",modalContent:"UserPage_modalContent__BiDby",modalHeader:"UserPage_modalHeader__9ag_d",modalTitle:"UserPage_modalTitle__y3ngP",modalCloseBtn:"UserPage_modalCloseBtn__lSYet",modalBody:"UserPage_modalBody__VF5j6",planFeatures:"UserPage_planFeatures__oah54",featuresTitle:"UserPage_featuresTitle__UCaw7",featuresList:"UserPage_featuresList__G_g_b",modalFooter:"UserPage_modalFooter__6xTf6",cancelSubscriptionBtn:"UserPage_cancelSubscriptionBtn__b9qh_"}},3662:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>_});var s=a(5155),n=a(5731),o=a(2115),r=a(6766),l=a(6153),c=a(7771),i=a(3024),d=a.n(i);function m(e){let{isOpen:t,onClose:a,onCancelSubscription:n}=e;return((0,o.useEffect)(()=>{let e=e=>{"Escape"===e.key&&a()};return t&&(document.addEventListener("keydown",e),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",e),document.body.style.overflow="auto"}},[t,a]),t)?(0,s.jsx)("div",{className:d().modalOverlay,onClick:e=>{e.target===e.currentTarget&&a()},children:(0,s.jsxs)("div",{className:d().modalContent,children:[(0,s.jsxs)("div",{className:d().modalHeader,children:[(0,s.jsx)("h2",{className:d().modalTitle,children:"Plus方案詳情"}),(0,s.jsx)("button",{className:d().modalCloseBtn,onClick:a,"aria-label":"關閉",children:"✕"})]}),(0,s.jsx)("div",{className:d().modalBody,children:(0,s.jsxs)("div",{className:d().planFeatures,children:[(0,s.jsx)("h3",{className:d().featuresTitle,children:"Plus方案包含功能："}),(0,s.jsxs)("ul",{className:d().featuresList,children:[(0,s.jsxs)("li",{className:d().featureItem,children:[(0,s.jsx)(r.default,{src:"/img/Vector-22.png",alt:"功能圖標",width:20,height:20}),(0,s.jsx)("span",{children:"筆記功能"})]}),(0,s.jsxs)("li",{className:d().featureItem,children:[(0,s.jsx)(r.default,{src:"/img/Vector-22.png",alt:"功能圖標",width:20,height:20}),(0,s.jsx)("span",{children:"收藏功能"})]}),(0,s.jsxs)("li",{className:d().featureItem,children:[(0,s.jsx)(r.default,{src:"/img/Vector-22.png",alt:"功能圖標",width:20,height:20}),(0,s.jsx)("span",{children:"AI解析功能"})]}),(0,s.jsxs)("li",{className:d().featureItem,children:[(0,s.jsx)(r.default,{src:"/img/Vector-22.png",alt:"功能圖標",width:20,height:20}),(0,s.jsx)("span",{children:"筆記生成題目功能"})]}),(0,s.jsxs)("li",{className:d().featureItem,children:[(0,s.jsx)(r.default,{src:"/img/Vector-22.png",alt:"功能圖標",width:20,height:20}),(0,s.jsx)("span",{children:"主題不限"})]}),(0,s.jsxs)("li",{className:d().featureItem,children:[(0,s.jsx)(r.default,{src:"/img/Vector-22.png",alt:"功能圖標",width:20,height:20}),(0,s.jsx)("span",{children:"單次題目生成三十題"})]})]})]})}),(0,s.jsx)("div",{className:d().modalFooter,children:(0,s.jsx)("button",{className:d().cancelSubscriptionBtn,onClick:n,children:"取消訂閱"})})]})}):null}async function u(){try{let e=localStorage.getItem("token");if(!e)return console.error("找不到 token"),[];let t=await fetch("".concat(n.Py,"/api/familiarity/"),{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)}});if(!t.ok)return console.error("獲取熟悉度數據失敗：",t.status,await t.text()),[];let a=await t.json();return Array.isArray(a)?a.map(e=>{var t,a,s,n;return{name:(null==(t=e.quiz_topic)?void 0:t.quiz_topic)||"未命名主題",familiarity:null!=(s=e.familiarity)?s:0,quizId:null!=(n=null==(a=e.quiz_topic)?void 0:a.id)?n:null}}):[]}catch(e){return console.error("獲取熟悉度數據失敗:",e),[]}}let h=null,p=0;async function g(){try{let e=Date.now();if(h&&e-p<3e4)return h;let t=await u();return h=t,p=e,t}catch(e){if(console.error("獲取主題熟悉度失敗:",e),h)return h;return[]}}var f=a(9057),w=a(6349);function _(){let[e,t]=(0,o.useState)(!1),[a,i]=(0,o.useState)("personal"),[u,h]=(0,o.useState)({}),[p,_]=(0,o.useState)([]),[C,v]=(0,o.useState)(!1),[b,j]=(0,o.useState)(!1),[x,y]=(0,o.useState)(new Map),[P,N]=(0,o.useState)(0),I=(0,o.useRef)(null),k=(0,o.useCallback)(e=>{let t=x.get(e);return t&&Date.now()-t.timestamp<6e4?t.data:null},[x]),S=(0,o.useCallback)((e,t)=>{y(a=>new Map(a).set(e,{data:t,timestamp:Date.now()}))},[]),U=(0,o.useCallback)(async()=>{I.current&&I.current.abort(),I.current=new AbortController;try{let e=k("user-data"),t=k("user-topics");if(e&&t){h(e),_(t);return}Date.now();let[a,s]=await Promise.allSettled([L(),E()]);Date.now(),"fulfilled"===a.status&&a.value&&(h(a.value),S("user-data",a.value)),"fulfilled"===s.status&&s.value&&(_(s.value),S("user-topics",s.value)),N(Date.now())}catch(e){}},[]);(0,o.useCallback)(async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:100;for(let s=0;s<t;s++)try{return await e()}catch(n){if(s===t-1)throw n;let e=a*Math.pow(2,s);await new Promise(t=>setTimeout(t,e))}},[]);let T=()=>{t(!1),document.body.style.overflow="auto"},A=e=>{i(e)},B=async()=>{let e=null;try{e=(0,f.S5)("正在前往付款頁面，請稍候...");let t=await fetch("".concat(DJANGO,"/ecpay/"),{method:"POST",headers:{Accept:"text/html",Authorization:"Bearer ".concat(localStorage.getItem("token"))},credentials:"include"});if(!t.ok){let a="無法取得付款頁面，請稍後再試。";try{let e=await t.clone().json();a=(null==e?void 0:e.message)||(null==e?void 0:e.detail)||a}catch(e){}e&&"function"==typeof e.close&&e.close(),(0,f.S5)(a);return}let a=await t.text();if(!a||!a.includes("<form")||!a.includes("</html>")){e&&"function"==typeof e.close&&e.close(),(0,f.S5)("回傳內容不是有效的付款頁面。");return}let s=window.open("","_blank");if(!s){e&&"function"==typeof e.close&&e.close(),(0,f.S5)("被瀏覽器封鎖彈窗，請允許此網站開新視窗後再試。");return}e&&"function"==typeof e.close&&e.close(),s.document.open(),s.document.write(a),s.document.close()}catch(t){console.error("ecpay error:",t),e&&"function"==typeof e.close&&e.close(),(0,f.S5)("發送付款請求失敗，請稍後再試。")}},L=async()=>{let e=localStorage.getItem("token"),t=localStorage.getItem("userId");if(!e)return null;if(!t)try{let a=e.split(".")[1];if(a){let e=a.replace(/-/g,"+").replace(/_/g,"/"),s=decodeURIComponent(atob(e).split("").map(e=>"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2)).join("")),n=JSON.parse(s);t=n.user_id||n.user||n.id||null}}catch(e){}if(!t)return null;let a="/api/django/users/".concat(t,"/");try{var s;try{console.debug("[UserPage] fetch user",a,"token?",!!e,"userId",t)}catch(e){}let n=await fetch(a,{method:"GET",headers:{Authorization:"Bearer ".concat(e)},signal:null==(s=I.current)?void 0:s.signal});if(!n.ok)throw Error("API 請求失敗");let o=await n.json();return{name:o.username||"未知",email:o.email||"未知",registerDate:(e=>{let t=new Date(e),a=t.getFullYear(),s=String(t.getMonth()+1).padStart(2,"0"),n=String(t.getDate()).padStart(2,"0"),o=String(t.getHours()).padStart(2,"0"),r=String(t.getMinutes()).padStart(2,"0");return"".concat(a,"/").concat(s,"/").concat(n," ").concat(o,":").concat(r)})(o.created_at||new Date)}}catch(e){return e.name,null}},D=async()=>{try{let e=localStorage.getItem("token");if(!e)return;let t=new URLSearchParams(window.location.search),a=t.get("merchant_trade_no")||t.get("MerchantTradeNo");if(!a)return;if(/^\[.*\]$/.test(a))try{a=JSON.parse(a.replace(/'/g,'"')),Array.isArray(a)&&(a=a[0])}catch(e){a=a.replace(/\[|'|\]/g,"")}if(!a||a.length<20)return;let s=await fetch("".concat(n.Py,"/payment-status/?merchant_trade_no=").concat(encodeURIComponent(a)),{method:"GET",headers:{Authorization:"Bearer ".concat(e)}});if(!s.ok)return;let o=await s.json();(null==o?void 0:o.status)==="completed"&&(localStorage.setItem("is_paid","true"),v(!0))}catch(e){console.error("payment-status 檢查失敗:",e)}};(0,o.useEffect)(()=>{v("true"===localStorage.getItem("is_paid")),D()},[]);let E=async()=>{try{let e=await g();return Array.isArray(e)?e:[]}catch(e){return[]}},F=(0,o.useCallback)(async function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=Date.now();(e||!(t-P<6e4))&&await U()},[P]);(0,o.useEffect)(()=>(U(),v("true"===localStorage.getItem("is_paid")),(async()=>{try{localStorage.getItem("token")}catch(e){}})(),()=>{I.current&&I.current.abort()}),[]),(0,o.useEffect)(()=>{let e=setInterval(()=>{F(!1)},3e5);return()=>clearInterval(e)},[F]),(0,o.useEffect)(()=>{let e=e=>{"Escape"===e.key&&T()};return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}},[]);let H=u.name||"",z=/[^\x00-\x7F]/.test(H)?H.length>5?"1rem":"1.5rem":H.length>6?"1.3rem":"2.3rem";return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(l.A,{showMenu:!0,isMenuOpen:e,onToggleMenu:()=>{t(!e),e?document.body.style.overflow="auto":document.body.style.overflow="hidden"},enableNoteQLink:!0}),(0,s.jsx)("section",{className:d().userDashboard,children:(0,s.jsxs)("div",{className:d().dashboardContainer,children:[(0,s.jsx)("div",{className:d().profileColumn,children:(0,s.jsxs)("div",{className:d().profileCard,children:[(0,s.jsx)(r.default,{src:"/img/Vector-20.png",alt:"Background",className:d().profileBg,fill:!0,priority:!0,sizes:"(max-width: 768px) 100vw, 450px",style:{objectFit:"cover"}}),(0,s.jsxs)("header",{className:d().profileHeader,children:[(0,s.jsx)(r.default,{src:"/img/userrr.gif",alt:"Chart Icon",className:d().profileIcon,width:100,height:80,style:{objectFit:"contain",filter:"sepia(1) invert(1) brightness(1.1) "}}),(0,s.jsx)("h1",{className:d().profileName,title:H,style:{fontSize:z},children:H})]}),(0,s.jsxs)("div",{className:d().tabContainer,children:[(0,s.jsx)("button",{className:"".concat(d().tabButton," ").concat("personal"===a?d().active:""),onClick:()=>A("personal"),children:"個人資料"}),(0,s.jsx)("button",{className:"".concat(d().tabButton," ").concat("familiarity"===a?d().active:""),onClick:()=>A("familiarity"),children:"熟悉度"})]}),(0,s.jsx)("div",{className:"".concat(d().tabPanel," ").concat("personal"===a?d().active:""),children:(0,s.jsxs)("div",{className:d().personalInfo,children:[(0,s.jsxs)("div",{className:d().infoItem,children:[(0,s.jsx)("h3",{className:d().infoTitle,children:"電子郵件"}),(0,s.jsx)("p",{className:d().infoContent,children:u.email})]}),(0,s.jsxs)("div",{className:d().infoItem,children:[(0,s.jsx)("h3",{className:d().infoTitle,children:"註冊時間"}),(0,s.jsx)("p",{className:d().infoContent,children:u.registerDate})]}),(0,s.jsxs)("div",{className:d().infoItem,children:[(0,s.jsx)("h3",{className:d().infoTitle,children:"目前方案"}),(0,s.jsx)("p",{className:d().infoContent,children:C?"Plus方案":"免費方案"})]}),(0,s.jsx)("button",{className:d().changePasswordBtn,onClick:()=>{(0,f.bF)(async(e,t)=>{if(!e||!t)return;let a=localStorage.getItem("token");if(!a)return void(0,f.S5)("尚未登入或找不到 token，請重新登入後再試一次。");try{let s=await fetch("".concat(n.Py,"/reset-password/"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(a)},body:JSON.stringify({old_password:e,new_password:t})}),o=await s.json().catch(()=>({}));if(!s.ok){let e=(null==o?void 0:o.message)||(null==o?void 0:o.detail)||"更改密碼失敗，請稍後重試。";(0,f.S5)(e);return}(0,f.S5)((null==o?void 0:o.message)||"密碼已更新成功！")}catch(e){(0,f.S5)("網路或伺服器異常，請稍後再試。")}})},children:"更改密碼"})]})}),(0,s.jsx)("div",{className:"".concat(d().tabPanel," ").concat("familiarity"===a?d().active:""),children:(0,s.jsx)("div",{className:d().topicsList,children:p&&p.length>0?p.map((e,t)=>(0,s.jsxs)("div",{className:d().topicItem,children:[(0,s.jsx)("div",{className:d().topicHeader,children:(0,s.jsx)("h2",{className:d().topicTitle,children:e.name})}),(0,s.jsxs)("div",{className:d().progressContainer,children:[(0,s.jsx)("span",{className:d().progressLabel,children:"熟悉度："}),(0,s.jsx)("div",{className:d().progressBar,children:(0,s.jsx)("div",{className:d().progress,style:{width:"".concat(e.familiarity,"%")}})}),(0,s.jsxs)("span",{className:d().progressPercentage,children:[e.familiarity,"%"]})]})]},t)):(0,s.jsx)("div",{className:d().noTopicsMessage,children:(0,s.jsx)("p",{children:"目前您還沒有任何主題熟悉度"})})})})]})}),(0,s.jsxs)("div",{className:d().subscriptionColumn,children:[(0,s.jsxs)("article",{className:d().planCard,children:[(0,s.jsx)("div",{className:"".concat(d().planHeader," ").concat(C?d().free:d().current),children:C?"免費方案":"目前方案"}),(0,s.jsxs)("ul",{className:d().featureList,children:[(0,s.jsxs)("li",{className:d().featureItem,children:[(0,s.jsx)(r.default,{src:"/img/Vector-22.png",alt:"Feature icon",width:20,height:20,loading:"lazy"}),(0,s.jsx)("span",{children:"熟悉度功能"})]}),(0,s.jsxs)("li",{className:d().featureItem,children:[(0,s.jsx)(r.default,{src:"/img/Vector-22.png",alt:"Feature icon",width:20,height:20,loading:"lazy"}),(0,s.jsx)("span",{children:"免費生成三次主題"})]}),(0,s.jsxs)("li",{className:d().featureItem,children:[(0,s.jsx)(r.default,{src:"/img/Vector-22.png",alt:"Feature icon",width:20,height:20,loading:"lazy"}),(0,s.jsx)("span",{children:"單次生成五題題目"})]}),(0,s.jsxs)("li",{className:d().featureItem,children:[(0,s.jsx)(r.default,{src:"/img/Vector-22.png",alt:"Feature icon",width:20,height:20,loading:"lazy"}),(0,s.jsx)("span",{children:"訂閱即享更多功能"})]})]})]}),(0,s.jsxs)("article",{className:d().planCard,children:[(0,s.jsx)("button",{className:"".concat(d().planHeader," ").concat(C?d().current:d().upgrade),onClick:C?void 0:B,disabled:C,children:C?"目前方案":"升級PLUS"}),(0,s.jsxs)("ul",{className:d().featureList,children:[(0,s.jsxs)("li",{className:d().featureItem,children:[(0,s.jsx)(r.default,{src:"/img/Vector-22.png",alt:"Feature icon",width:20,height:20,loading:"lazy"}),(0,s.jsx)("span",{children:"筆記功能"})]}),(0,s.jsxs)("li",{className:d().featureItem,children:[(0,s.jsx)(r.default,{src:"/img/Vector-22.png",alt:"Feature icon",width:20,height:20,loading:"lazy"}),(0,s.jsx)("span",{children:"收藏與AI解析功能"})]}),(0,s.jsxs)("li",{className:d().featureItem,children:[(0,s.jsx)(r.default,{src:"/img/Vector-22.png",alt:"Feature icon",width:20,height:20,loading:"lazy"}),(0,s.jsx)("span",{children:"主題不限/單次題目生成十五題"})]}),(0,s.jsx)("li",{className:d().featureItem,children:C?(0,s.jsx)("button",{className:d().viewCurrentPlanBtn,onClick:()=>{j(!0)},children:"查看目前方案"}):(0,s.jsxs)("div",{className:d().priceDisplay,children:[(0,s.jsx)(r.default,{src:"/img/Vector-22.png",alt:"Feature icon",width:20,height:20,loading:"lazy"}),(0,s.jsx)("span",{children:"99NTD/月"})]})})]})]})]})]})}),(0,s.jsx)(m,{isOpen:b,onClose:()=>j(!1),onCancelSubscription:()=>{(0,f.gB)("確定要取消Plus訂閱嗎？",()=>{v(!1),localStorage.setItem("is_paid","false"),j(!1),(0,f.S5)("已取消Plus訂閱，回到免費方案")})}}),(0,s.jsx)(c.A,{isOpen:e,onClose:T,onLogout:w.I})]})}},4247:(e,t,a)=>{"use strict";a.r(t),a.d(t,{closeCustomConfirm:()=>n,safeConfirm:()=>o,showCustomConfirm:()=>s});let s=(e,t,a)=>{let s=document.createElement("div");s.className="custom-confirm-modal",s.innerHTML='\n        <div class="custom-confirm-content">\n            <div class="custom-confirm-message">'.concat(e,'</div>\n            <div class="custom-confirm-buttons">\n                <button class="custom-confirm-btn custom-confirm-cancel" onclick="closeCustomConfirm(false)">取消</button>\n                <button class="custom-confirm-btn custom-confirm-ok" onclick="closeCustomConfirm(true)">確定</button>\n            </div>\n        </div>\n    '),document.body.appendChild(s),window.customConfirmCallbacks={onConfirm:t,onCancel:a},document.body.style.overflow="hidden",setTimeout(()=>{s.classList.add("active")},10)},n=e=>{let t=document.querySelector(".custom-confirm-modal");t&&(t.classList.remove("active"),setTimeout(()=>{document.body.removeChild(t),document.body.style.overflow="auto",window.customConfirmCallbacks&&(e&&window.customConfirmCallbacks.onConfirm?window.customConfirmCallbacks.onConfirm():!e&&window.customConfirmCallbacks.onCancel&&window.customConfirmCallbacks.onCancel(),window.customConfirmCallbacks=null)},300))},o=(e,t,a)=>{s(e,t,a)}},4740:(e,t,a)=>{"use strict";a.r(t),a.d(t,{closePasswordChangeDialog:()=>n,confirmPasswordChange:()=>o,showPasswordChangeDialog:()=>s});let s=e=>{let t=document.createElement("div");t.className="custom-prompt-modal",t.innerHTML='\n        <div class="custom-prompt-content">\n            <div class="custom-prompt-title">更改密碼</div>\n            <div class="password-input-group">\n                <label for="oldPasswordInput">舊密碼：</label>\n                <input type="password" class="custom-prompt-input" id="oldPasswordInput" placeholder="請輸入舊密碼">\n            </div>\n            <div class="password-input-group">\n                <label for="newPasswordInput">新密碼：</label>\n                <input type="password" class="custom-prompt-input" id="newPasswordInput" placeholder="請輸入新密碼">\n            </div>\n            <div class="custom-prompt-buttons">\n                <button class="custom-prompt-btn custom-prompt-btn-secondary" onclick="closePasswordChangeDialog()">取消</button>\n                <button class="custom-prompt-btn custom-prompt-btn-primary" onclick="confirmPasswordChange()">確定</button>\n            </div>\n        </div>\n    ',document.body.appendChild(t),window.passwordChangeCallback=e,document.body.style.overflow="hidden",setTimeout(()=>{t.classList.add("active");let e=document.getElementById("oldPasswordInput");e&&e.focus()},10)},n=()=>{let e=document.querySelector(".custom-prompt-modal");e&&(e.classList.remove("active"),setTimeout(()=>{document.body.removeChild(e),document.body.style.overflow="auto",window.passwordChangeCallback&&(window.passwordChangeCallback(null,null),window.passwordChangeCallback=null)},300))},o=()=>{let e=document.getElementById("oldPasswordInput"),t=document.getElementById("newPasswordInput"),a=e?e.value.trim():"",s=t?t.value.trim():"",n=document.querySelector(".custom-prompt-modal");n&&(n.classList.remove("active"),setTimeout(()=>{document.body.removeChild(n),document.body.style.overflow="auto",window.passwordChangeCallback&&(window.passwordChangeCallback(a,s),window.passwordChangeCallback=null)},300))}},5445:(e,t,a)=>{"use strict";a.r(t),a.d(t,{closeCustomAlert:()=>n,safeAlert:()=>o,showCustomAlert:()=>s});let s=(e,t)=>{let a=document.createElement("div");a.className="custom-alert-modal",a.innerHTML='\n        <div class="custom-alert-content">\n            <div class="custom-alert-message">'.concat(e,'</div>\n            <button class="custom-alert-btn" onclick="closeCustomAlert()">確定</button>\n        </div>\n    '),document.body.appendChild(a),window.customAlertCallback=t,document.body.style.overflow="hidden",setTimeout(()=>{a.classList.add("active")},10)},n=()=>{let e=document.querySelector(".custom-alert-modal");e&&(e.classList.remove("active"),setTimeout(()=>{document.body.removeChild(e),document.body.style.overflow="auto",window.customAlertCallback&&(window.customAlertCallback(),window.customAlertCallback=null)},300))},o=(e,t)=>{s(e,t)}},5731:(e,t,a)=>{"use strict";a.d(t,{Py:()=>o});var s=a(3464);let n=a(9509).env.NEXT_PUBLIC_API_ORIGIN||"/api",o="".concat(n),r=s.A.create({baseURL:o,withCredentials:!0}),l=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=e.startsWith("/")?"".concat(o).concat(e):"".concat(o,"/").concat(e),s=await fetch(a,{...t,credentials:"include"});if(!s.ok)throw Error("API Error: ".concat(s.status));return s.json()};try{l[Symbol.toPrimitive]=()=>o,l.toString=()=>o,l.valueOf=()=>o}catch(e){}try{r[Symbol.toPrimitive]=()=>o,r.toString=()=>o,r.valueOf=()=>o}catch(e){}},6153:(e,t,a)=>{"use strict";a.d(t,{A:()=>l});var s=a(5155),n=a(6874),o=a.n(n),r=a(6766);function l(e){let{showMenu:t=!1,isMenuOpen:a=!1,onToggleMenu:n=null,showAuthNav:l=!1,enableNoteQLink:c=!1}=e;return(0,s.jsx)("section",{id:"header",children:(0,s.jsx)("header",{className:"site-header",children:(0,s.jsxs)("div",{className:"container header-container",children:[c?(0,s.jsx)(o(),{href:"/homegame",className:"brand-name",style:{textDecoration:"none",color:"inherit"},children:"NoteQ"}):(0,s.jsx)("div",{className:"brand-name",children:"NoteQ"}),l&&(0,s.jsxs)("nav",{className:"auth-nav",children:[(0,s.jsx)(o(),{href:"/login?signup=1",className:"btn-signup",children:"Sign up"}),(0,s.jsx)(o(),{href:"/login",className:"btn-login",children:"Login"})]}),t&&(0,s.jsx)("button",{className:"menu-button ".concat(a?"active":""),"aria-label":"Toggle menu",onClick:n,children:(0,s.jsx)(r.default,{src:"/img/Vector-18.png",alt:"Menu Icon",width:24,height:24})})]})})})}},6178:(e,t,a)=>{Promise.resolve().then(a.bind(a,3662))},6349:(e,t,a)=>{"use strict";a.d(t,{I:()=>n});var s=a(9057);let n=()=>{(0,s.gB)("確定要登出嗎？",()=>{localStorage.clear(),sessionStorage.clear(),window.location.href="/"},()=>{})}},7771:(e,t,a)=>{"use strict";a.d(t,{A:()=>i});var s=a(5155),n=a(6874),o=a.n(n),r=a(6766),l=a(5695),c=a(6349);function i(e){let{isOpen:t=!1,onClose:a=null}=e,n=(0,l.usePathname)();return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"menu-backdrop ".concat(t?"active":""),onClick:a}),(0,s.jsxs)("div",{className:"menu-dropdown ".concat(t?"active":""),children:[(0,s.jsx)("div",{className:"menu-header"}),[{href:"/homegame",icon:"/img/Vector-16.png",label:"首頁"},{href:"/note",icon:"/img/Vector-15.png",label:"筆記"},{href:"/user",icon:"/img/Vector-33.png",label:"使用者"}].map(e=>(0,s.jsxs)(o(),{href:e.href,className:"menu-item ".concat(n===e.href?"active":""),children:[(0,s.jsx)(r.default,{src:e.icon,alt:"",className:"menu-item-icon",width:24,height:24}),(0,s.jsx)("span",{children:e.label})]},e.href)),(0,s.jsxs)("button",{className:"menu-item logout-button",onClick:c.I,style:{background:"none",border:"none",cursor:"pointer"},children:[(0,s.jsx)(r.default,{src:"/img/Vector-30.png",alt:"",className:"menu-item-icon",width:24,height:24}),(0,s.jsx)("span",{children:"登出"})]})]})]})}},9057:(e,t,a)=>{"use strict";a.d(t,{S5:()=>s.safeAlert,gB:()=>n.safeConfirm,bF:()=>o.showPasswordChangeDialog});var s=a(5445),n=a(4247),o=a(4740);Promise.resolve().then(a.bind(a,5445)).then(e=>{window.showCustomAlert=e.showCustomAlert,window.closeCustomAlert=e.closeCustomAlert,window.safeAlert=e.safeAlert}),Promise.resolve().then(a.bind(a,4247)).then(e=>{window.showCustomConfirm=e.showCustomConfirm,window.closeCustomConfirm=e.closeCustomConfirm,window.safeConfirm=e.safeConfirm}),a.e(11).then(a.bind(a,11)).then(e=>{window.showCustomPrompt=e.showCustomPrompt,window.closeCustomPrompt=e.closeCustomPrompt,window.confirmCustomPrompt=e.confirmCustomPrompt}),Promise.resolve().then(a.bind(a,4740)).then(e=>{window.showPasswordChangeDialog=e.showPasswordChangeDialog,window.closePasswordChangeDialog=e.closePasswordChangeDialog,window.confirmPasswordChange=e.confirmPasswordChange})}},e=>{e.O(0,[287,794,259,441,964,358],()=>e(e.s=6178)),_N_E=e.O()}]);